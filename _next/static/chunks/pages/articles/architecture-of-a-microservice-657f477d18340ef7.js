(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[228],{8450:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles/architecture-of-a-microservice",function(){return n(6774)}])},5933:function(e,t,n){"use strict";function i(e){return new Date("".concat(e,"T00:00:00Z")).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"})}n.d(t,{p:function(){return i}})},6774:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j},meta:function(){return x}});var i=n(5893),a=n(1799),r=n(9396),s=n(9008),o=n.n(s),l=n(1163),d=n(3210),c=n(5933),h=n(6010);function u(e){var t=e.children,n=e.className;return(0,i.jsx)("div",{className:(0,h.Z)(n,"prose dark:prose-invert"),children:t})}function m(e){return(0,i.jsx)("svg",(0,r.Z)((0,a.Z)({viewBox:"0 0 16 16",fill:"none","aria-hidden":"true"},e),{children:(0,i.jsx)("path",{d:"M7.25 11.25 3.75 8m0 0 3.5-3.25M3.75 8h8.5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))}function p(e){var t=e.children,n=e.meta,a=e.isRssFeed,r=e.previousPathname,s=(0,l.useRouter)();return void 0!==a&&a?t:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o(),{children:[(0,i.jsx)("title",{children:"".concat(n.title," - John Weland")}),(0,i.jsx)("meta",{name:"description",content:n.description})]}),(0,i.jsx)(d.W,{className:"mt-16 lg:mt-32",children:(0,i.jsx)("div",{className:"xl:relative",children:(0,i.jsxs)("div",{className:"mx-auto max-w-2xl",children:[r&&(0,i.jsx)("button",{type:"button",onClick:function(){return s.back()},"aria-label":"Go back to articles",className:"group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10 dark:hover:border-zinc-700 dark:hover:ring-white/20 lg:absolute lg:-left-5 lg:mb-0 lg:-mt-2 xl:-top-1.5 xl:left-0 xl:mt-0",children:(0,i.jsx)(m,{className:"h-4 w-4 stroke-zinc-500 transition group-hover:stroke-zinc-700 dark:stroke-zinc-500 dark:group-hover:stroke-zinc-400"})}),(0,i.jsxs)("article",{children:[(0,i.jsxs)("header",{className:"flex flex-col",children:[(0,i.jsx)("h1",{className:"mt-6 text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-5xl",children:n.title}),(0,i.jsxs)("time",{dateTime:n.date,className:"order-first flex items-center text-base text-zinc-400 dark:text-zinc-500",children:[(0,i.jsx)("span",{className:"h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"}),(0,i.jsx)("span",{className:"ml-3",children:(0,c.p)(n.date)})]})]}),(0,i.jsx)(u,{className:"mt-8",children:t})]})]})})})]})}var x={author:"John Weland",date:"2021-08-08",title:"Architecture of a Microservice",description:"It is not uncommon these days to have a potential employer put your skills to the test with a code challenge. Typically, in my experience, this is a smaller task or set of tasks and they expect you do perform live over the course of a few minutes to an hour.\n\nThis was the first time I had -- had a code challenge that was not live and where the expected turnaround was approximately a week of development time."},f=function(e){return(0,i.jsx)(p,Object.assign({meta:x},e))};function y(e){var t=Object.assign({p:"p",h2:"h2",blockquote:"blockquote",a:"a",ul:"ul",li:"li",ol:"ol",code:"code"},e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"It is not uncommon these days to have a potential employer put your skills to the test with a code challenge. Typically, in my experience, this is a smaller task or set of tasks and they expect you do perform live over the course of a few minutes to an hour."}),"\n",(0,i.jsx)(t.p,{children:"This was the first time I had -- had a code challenge that was not live and where the expected turnaround was approximately a week of development time."}),"\n",(0,i.jsx)(t.h2,{children:"The Project Description"}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsx)(t.p,{children:"\xa0\nThe goal of this exercise is to iterate on the development and deployment of a “cloud native” service in AWS that can be invoked to check a set of IP address lists for every single attempted phone call placed on our network, as part of a larger fraud detection system.If the IP address is listed in any sources, then they should be returned."}),"\n",(0,i.jsxs)(t.p,{children:["The service will retrieve and automatically update from ",(0,i.jsx)(t.a,{href:"https://github.com/firehol/blocklist-ipsets",children:"https://github.com/firehol/blocklist-ipsets"})," without any manual intervention.\n\xa0"]}),"\n"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Deliverables should include everything needed to deploy(and maintain) the service in a production AWS account."}),"\n",(0,i.jsx)(t.li,{children:"Code should be developed in Typescript or Java, and only make the assumption all developers run a macOS development environment."}),"\n",(0,i.jsx)(t.li,{children:"Bonus points for high availability deployments, benchmarks, and telemetry."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{children:"What I built"}),"\n",(0,i.jsxs)(t.p,{children:["I was up to this point relatively green when it came to ",(0,i.jsx)(t.a,{href:"https://aws.amazon.com/",children:"AWS"}),". I chose to break my project into two parts; the first was a scheduled job that would run on Lambda to pull from the ",(0,i.jsx)(t.a,{href:"https://github.com/firehol/.blocklist-ipsets",children:"Firehol"})," list and update DynamoDB as needed."]}),"\n",(0,i.jsx)(t.p,{children:'The second part was a Lambda that was invoked via API Gateway to query the passed input (IP Address)from DynamoDB. Then return a JSON payload including information like "is the IP on a block list"? "Where is the IP from geographically"?'}),"\n",(0,i.jsx)(t.h2,{children:"What I would do differently"}),"\n",(0,i.jsx)(t.p,{children:"While my deployment worked, if I had to do it over again; I could keep a queryable service with something like this."}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"I would move the setup/update to an EC2 instance that would be started and stopped by a lambda."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"This would weed out any potential timeouts trying ot update the IP addresses directly from Lambda which as a 15 minute max time limit."}),"\n",(0,i.jsx)(t.li,{children:"If there was an error in updating, this would allow me to set an alarm and then trigger a second attempt or get a human involved."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["I would update the querying side of the project to take in IP ranges with CIDR e.g ",(0,i.jsx)(t.code,{children:"a.b.c.0/24"})]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Lastly while I used ",(0,i.jsx)(t.code,{children:"serverless"})," in this implementation, if I were to do it over I would concider using ",(0,i.jsx)(t.code,{children:"aws-cdk"})," as my TypeScript library of choice as it is maintained directly from Amazon's AWS team and builds the blueprints/templates for your stack."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"An alternative if you don't need a queryable service, is that the EC2 that runs to update the IP list rather than updating a DynamoDB you could simply update the WAF (web application firewall) in front of your infrastructurer."})]})}var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.jsx)(f,Object.assign({},e,{children:(0,i.jsx)(y,e)}))}},9008:function(e,t,n){e.exports=n(5443)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8450)}),_N_E=e.O()}]);